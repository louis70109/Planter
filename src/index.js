const { router, text } = require('bottender/router');
const plantList = require('../resources/plants - é …ç›®1.json');

async function é¤ŠåœŸ(context) {
  await context.sendText(
    `ã€é¤ŠåœŸå°çŸ¥è­˜ã€‘
1. éœ€è¦å®šæœŸæˆ–æ˜¯åœ¨æ”¶æˆå¾Œç¿»ã€é¬†åœŸï¼ŒåŒæ™‚å¯ä»¥åŠ å…¥å’–å•¡æ¸£ã€åŸ¹é¤ŠåœŸç­‰ç­‰çš„æ±è¥¿å¢åŠ åœŸå£¤ç©ºéš™ï¼Œä¸¦å°‡åº•ä¸‹çš„åœŸç¿»å‡ºä¾†æ›¬æ›¬å¤ªé™½æ®ºèŒï¼Œå¯è®“ä¹‹å¾Œçš„æ¤ç‰©æ ¹éƒ¨æœ‰ç©ºéš™å¯ä»¥é‘½ã€‚

2. éœ€è¦è¼ªæµç¨®ä¸åŒç¨®é¡(è¼ªè€•)ï¼Œé¿å…å¸æ”¶åˆ°åŒæ¨£é¤Šåˆ†`
  );
}

async function æ¼¿æœ(context) {
  await context.sendText(
    'å®šæ ªå¾Œéœ€è¦åœ¨æ—æ’æ£å­ç”¨ç¹©å­å›ºå®šï¼Œå¾…é•·åˆ°äº”æ®µä¹‹å¾Œéœ€è¦å®šæœŸå°‡é è¿‘æ ¹éƒ¨ä¸‰åˆ†ä¹‹ä¸€ä½ç½®çš„å«©è‘‰å‰ªæ‰ï¼Œåœ¨æèˆ‡æä¹‹é–“çš„æ–°é•·å‡ºä¾†çš„ä¹Ÿå¿…é ˆå‰ªæ‰ï¼Œä¸”ç¬¬ä¸€å€‹é•·å‡ºçš„æœå¯¦ä¹Ÿè¦æ—©æ”¶ï¼Œå¦å‰‡æœƒå½±éŸ¿ç”Ÿé•·ã€‚ å¯åœ¨é™„è¿‘ç¨®ä¸€äº›åœ°ç“œè‘‰ä¹‹é¡çš„åˆ©ç”¨ä½ç½®(æ·ºæ ¹èˆ‡æ·±æ ¹)'
  );
}
async function çµçƒè‘‰èœ(context) {
  await context.sendText(
    'å¤šæ•¸å»ºè­°ä½¿ç”¨ç¶²å­ï¼Œé¿å…è´è¶ç›¸é—œæ˜†èŸ²ä¸‹è›‹å•ƒé£Ÿï¼Œé ˆç”¨ä¸€äº›è¾²è—¥(å¤©ç„¶ã€åŠ å·¥)è®“æœå¯¦å¯ä»¥æœ‰æ›´å¥½çš„ç’°å¢ƒæˆé•·ã€‚'
  );
}

async function é¦™è¾›è‘‰èœ(context) {
  await context.sendText(
    'åƒæˆ‘æœƒåœ¨ä¸€äº›å®¹æ˜“æœ‰èšŠèŸ²çš„åœ°æ–¹ç¨®ä¸‹é€™é¡çš„æ¤ç‰©é¤Šç’°å¢ƒï¼Œè—‰ç”±åˆºæ¿€çš„å‘³é“é˜»æ“‹èŸ²å®³'
  );
}
async function æ¤ç‰©æŠ€å·§(context, { match }) {
  const tag = match.groups.tag;
  const plant = plantList.filter(
    (el) => el['æ¤ç‰©'] === tag || el['åˆ¥å'] === tag
  )[0];
  const response = `ã€${plant['æ¤ç‰©']}ã€‘${
    plant['åˆ¥å'] ? '(' + plant['åˆ¥å'] + ')' : ''
  } â˜˜ï¸

å»ºè­°ç¨®æ¤æ–¹å¼ ğŸ‘‰ ${plant['ç¨®æ¤æ–¹å¼']}
æ–½è‚¥é€±æœŸ â™»ï¸ ${plant['æ–½è‚¥é€±æœŸ']}
${plant['ç‰¹æ€§'] ? 'ç‰¹æ€§ ğŸ¤” ' + plant['ç‰¹æ€§'] : ''}

æ³¨æ„äº‹é … â€¼ï¸ ${plant['æ³¨æ„äº‹é …']}

å°æŠ€å·§ ğŸ‘€ ${plant['å°æŠ€å·§']}
`;
  await context.sendText(response);
}

async function é …ç›®(context) {
  let response = `1. ${plantList[0]['æ¤ç‰©']}(${
    plantList[0]['åˆ¥å'] ? '(' + plantList[0]['åˆ¥å'] + ')' : ''
  })`;
  for (let i = 1; i < plantList.length; i++) {
    response += `\n${i + 1}. ${plantList[i]['æ¤ç‰©']} ${
      plantList[i]['åˆ¥å'] ? '(' + plantList[i]['åˆ¥å'] + ')' : ''
    }`;
  }
  await context.sendText(response);
}

async function HelpMe(context) {
  await context.sendText(`è¼¸å…¥
1.ã€Œé …ç›®ã€å³å¯çŸ¥é“ç¾åœ¨æœ‰å¤šå°‘å€‹æ¤ç‰©â˜˜ï¸é …ç›®
2.ã€ŒæŸ¥è©¢ æƒ³æ‰¾çš„æ¤ç‰©ã€ â¡ï¸æŸ¥è©¢ éŸ­èœ â¡ï¸æœƒå‘Šè¨´ä½ ç›¸é—œçŸ¥è­˜å–”ï¼
3.ã€ŒåœŸå£¤ã€å¯çŸ¥é“é¤ŠåœŸçš„ä¸€äº›ç§˜è¾›
4.ã€Œæ¼¿æœé¡ã€ã€Œçµçƒé¡ã€ã€Œé¦™è¾›è‘‰èœã€ä»¥ä¸€äº›æ¯”è¼ƒå¸¸è¦‹çš„æ¤ç‰©ç‰¹æ€§ä¸‹å»èªªæ˜
5. è‹¥æœ‰ä»»ä½•éŒ¯èª¤æˆ–æ˜¯æƒ³è£œå……çš„æ­¡è¿ä¾†ä¿¡ louis70109@gmail.com è¨è«–ğŸ™‚
`);
}

module.exports = async function App() {
  return router([
    text(['soli', 'é¤ŠåœŸ', 'åœŸå£¤'], é¤ŠåœŸ),
    text(['æ¼¿æœé¡'], æ¼¿æœ),
    text(['çµçƒé¡'], çµçƒè‘‰èœ),
    text(['é¦™è¾›è‘‰èœ'], é¦™è¾›è‘‰èœ),
    text(['class', 'é¡åˆ¥', 'é …ç›®', 'æœ‰å“ªäº›'], é …ç›®),
    text(
      /^(å°‹æ‰¾|æŸ¥è©¢|æ”¶å°‹|æœå°‹|å¹«æˆ‘æ‰¾|æƒ³æ‰¾|å¹«æ‰¾|å¹«å¿™æ‰¾|æ‰¾)\s*(?<tag>[\s\S]+)/,
      æ¤ç‰©æŠ€å·§
    ),
    text('*', HelpMe),
  ]);
};
